{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,0KAAmB;AAEjC,MAAM,eAAe,6KAAsB;AAE3C,MAAM,aAAa,2KAAoB;AAEvC,MAAM,cAAc,4KAAqB;AAEzC,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAsB;QACrB,WAAW,IAAA,yHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,6KAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,IAAA,uKAAG,EACvB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAsB;gBACrB,KAAK;gBACL,WAAW,IAAA,yHAAE,EAAC,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,iMAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,6KAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,2KAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,iLAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,kLAAwB;QACvB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,sLAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,oLAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,kLAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,iMAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,IAAA,yHAAE,EACX,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6LAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,iMAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 330, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,OAAO,WAAW,GAAG,0KAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,8KAAwB;QACvB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;AAGb,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/firebase/firestore/chat.ts"],"sourcesContent":["'use client';\nimport {\n  collection,\n  addDoc,\n  serverTimestamp,\n  writeBatch,\n  getDocs,\n  query,\n  Firestore,\n} from 'firebase/firestore';\n\nexport const saveChatMessage = async (\n  firestore: Firestore,\n  userId: string,\n  noteId: string,\n  role: 'user' | 'assistant',\n  content: string,\n  imageUrl?: string\n) => {\n  const messagesRef = collection(firestore, `users/${userId}/noteChats/${noteId}/messages`);\n  const messageData: any = {\n    role,\n    content,\n    timestamp: serverTimestamp(),\n  };\n\n  if (imageUrl) {\n    messageData.imageUrl = imageUrl;\n  }\n\n  await addDoc(messagesRef, messageData);\n};\n\nexport const clearChatHistory = async (firestore: Firestore, userId: string, noteId: string) => {\n    const messagesRef = collection(firestore, `users/${userId}/noteChats/${noteId}/messages`);\n    const q = query(messagesRef);\n    const querySnapshot = await getDocs(q);\n    \n    if (querySnapshot.empty) {\n        return;\n    }\n\n    const batch = writeBatch(firestore);\n    querySnapshot.forEach(doc => {\n        batch.delete(doc.ref);\n    });\n\n    await batch.commit();\n}"],"names":[],"mappings":";;;;;;AACA;AAAA;AADA;;AAWO,MAAM,kBAAkB,OAC7B,WACA,QACA,QACA,MACA,SACA;IAEA,MAAM,cAAc,IAAA,+KAAU,EAAC,WAAW,CAAC,MAAM,EAAE,OAAO,WAAW,EAAE,OAAO,SAAS,CAAC;IACxF,MAAM,cAAmB;QACvB;QACA;QACA,WAAW,IAAA,oLAAe;IAC5B;IAEA,IAAI,UAAU;QACZ,YAAY,QAAQ,GAAG;IACzB;IAEA,MAAM,IAAA,2KAAM,EAAC,aAAa;AAC5B;AAEO,MAAM,mBAAmB,OAAO,WAAsB,QAAgB;IACzE,MAAM,cAAc,IAAA,+KAAU,EAAC,WAAW,CAAC,MAAM,EAAE,OAAO,WAAW,EAAE,OAAO,SAAS,CAAC;IACxF,MAAM,IAAI,IAAA,0KAAK,EAAC;IAChB,MAAM,gBAAgB,MAAM,IAAA,4KAAO,EAAC;IAEpC,IAAI,cAAc,KAAK,EAAE;QACrB;IACJ;IAEA,MAAM,QAAQ,IAAA,+KAAU,EAAC;IACzB,cAAc,OAAO,CAAC,CAAA;QAClB,MAAM,MAAM,CAAC,IAAI,GAAG;IACxB;IAEA,MAAM,MAAM,MAAM;AACtB","debugId":null}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAQA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,yHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,IAAA,oJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,IAAA,oJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 670, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/progress.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport * as ProgressPrimitive from '@radix-ui/react-progress';\n\nimport { cn } from '@/lib/utils';\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      'relative h-4 w-full overflow-hidden rounded-full bg-secondary',\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n\n    "],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/dashboard/image-upload-card.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { Card, CardContent, CardFooter } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Loader2, Send, CheckCircle, AlertTriangle, File, Copy, X } from 'lucide-react';\nimport { Progress } from '../ui/progress';\nimport { useToast } from '@/hooks/use-toast';\n\nexport interface ImageUpload {\n    id: string;\n    file: File;\n    status: 'compressing' | 'uploading' | 'complete' | 'error';\n    progress?: number;\n    downloadURL?: string;\n    error?: string;\n}\n\ninterface ImageUploadCardProps {\n    upload: ImageUpload;\n    onInstructionSubmit: (instruction: string) => void;\n    onCancel: () => void;\n}\n\nexport default function ImageUploadCard({ upload, onInstructionSubmit, onCancel }: ImageUploadCardProps) {\n    const [instruction, setInstruction] = React.useState('');\n    const { toast } = useToast();\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!instruction.trim()) return;\n        onInstructionSubmit(instruction);\n    };\n\n    const copyToClipboard = (text: string) => {\n        navigator.clipboard.writeText(text);\n        toast({ title: \"Copied to clipboard!\" });\n    };\n\n    const formatBytes = (bytes: number, decimals = 2) => {\n        if (bytes === 0) return '0 Bytes';\n        const k = 1024;\n        const dm = decimals < 0 ? 0 : decimals;\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n    }\n    \n    const isProcessing = upload.status === 'compressing' || upload.status === 'uploading';\n\n    return (\n        <Card className=\"w-full max-w-sm bg-gray-800 border-gray-700 text-white\">\n            <CardContent className=\"p-4\">\n                <div className=\"flex items-center gap-3 mb-3\">\n                    <div className=\"flex-shrink-0\">\n                        {upload.status === 'compressing' && <Loader2 className=\"h-6 w-6 animate-spin text-blue-400\" />}\n                        {upload.status === 'uploading' && <Loader2 className=\"h-6 w-6 animate-spin text-blue-400\" />}\n                        {upload.status === 'complete' && <CheckCircle className=\"h-6 w-6 text-green-400\" />}\n                        {upload.status === 'error' && <AlertTriangle className=\"h-6 w-6 text-red-400\" />}\n                        {!isProcessing && upload.status !== 'complete' && upload.status !== 'error' && <File className=\"h-6 w-6 text-gray-400\" />}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm font-medium truncate\">{upload.file.name}</p>\n                        <p className=\"text-xs text-gray-400\">{formatBytes(upload.file.size)}</p>\n                    </div>\n                     <Button variant=\"ghost\" size=\"icon\" className=\"h-7 w-7 text-gray-400 hover:bg-gray-700 hover:text-white\" onClick={onCancel}>\n                        <X className=\"h-4 w-4\" />\n                     </Button>\n                </div>\n\n                {isProcessing && (\n                    <div className=\"space-y-1\">\n                        <p className=\"text-xs text-blue-300 capitalize\">{upload.status}...</p>\n                        <Progress value={upload.progress} className=\"h-1 bg-gray-600\" />\n                    </div>\n                )}\n                 {upload.status === 'error' && (\n                    <p className=\"text-sm text-red-400\">{upload.error}</p>\n                 )}\n            </CardContent>\n            <CardFooter className=\"p-4 pt-0\">\n                 {upload.status === 'complete' ? (\n                     <form onSubmit={handleSubmit} className=\"w-full flex items-center gap-2\">\n                        <Input\n                            value={instruction}\n                            onChange={(e) => setInstruction(e.target.value)}\n                            placeholder=\"Ask anything...\"\n                            className=\"bg-gray-700 border-gray-600 focus:ring-blue-500\"\n                        />\n                        <Button type=\"submit\" size=\"icon\" className=\"h-10 w-10 flex-shrink-0 bg-blue-600 hover:bg-blue-700\">\n                            <Send className=\"h-4 w-4\" />\n                        </Button>\n                    </form>\n                 ) : (\n                    <Input\n                        placeholder=\"Ask anything...\"\n                        disabled\n                        className=\"bg-gray-900 border-gray-700 cursor-not-allowed\"\n                    />\n                 )}\n            </CardFooter>\n             {upload.downloadURL && (\n                <div className=\"px-4 pb-4\">\n                    <p className=\"text-xs text-gray-400 mb-1\">Image URL:</p>\n                    <div className=\"flex items-center gap-2\">\n                         <Input\n                            readOnly\n                            value={upload.downloadURL}\n                            className=\"bg-gray-700 border-gray-600 text-xs h-8\"\n                        />\n                        <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 flex-shrink-0 text-gray-400 hover:bg-gray-700 hover:text-white\" onClick={() => copyToClipboard(upload.downloadURL!)}>\n                            <Copy className=\"h-4 w-4\" />\n                        </Button>\n                    </div>\n                </div>\n            )}\n        </Card>\n    );\n}\n\n    "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1021, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/firebase/storage.ts"],"sourcesContent":["'use client';\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL, UploadTask } from 'firebase/storage';\nimport { getApp } from 'firebase/app';\n\nexport type UploadProgress = number;\n\nexport async function uploadToFirebase(\n    userId: string,\n    noteId: string,\n    file: File,\n    onProgress: (progress: UploadProgress) => void\n): Promise<string> {\n    const app = getApp();\n    const storage = getStorage(app);\n    const timestamp = new Date().getTime();\n    const storagePath = `users/${userId}/noteImages/${noteId}/${timestamp}_${file.name}`;\n    const storageRef = ref(storage, storagePath);\n\n    return new Promise((resolve, reject) => {\n        const uploadTask: UploadTask = uploadBytesResumable(storageRef, file);\n\n        uploadTask.on('state_changed',\n            (snapshot) => {\n                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                onProgress(progress);\n            },\n            (error) => {\n                console.error(\"Upload failed:\", error);\n                reject(error);\n            },\n            async () => {\n                try {\n                    const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\n                    resolve(downloadURL);\n                } catch (error) {\n                    reject(error);\n                }\n            }\n        );\n    });\n}\n\nfunction toBase64(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => {\n            // result is \"data:image/jpeg;base64,LzlqLzRBQ...\"\"\n            // we only want the part after the comma\n            if (typeof reader.result !== 'string') {\n                return reject('FileReader did not return a string');\n            }\n            resolve(reader.result.substring(reader.result.indexOf(',') + 1));\n        };\n        reader.onerror = reject;\n    });\n}\n\nexport async function uploadToImgBB(\n    file: File,\n    onProgress: (progress: UploadProgress) => void\n): Promise<string> {\n    const apiKey = process.env.NEXT_PUBLIC_IMGBB_API_KEY;\n    if(!apiKey) {\n        throw new Error(\"ImgBB API key is not configured. Please set NEXT_PUBLIC_IMGBB_API_KEY environment variable.\");\n    }\n    \n    // ImgBB free tier has a 32MB limit. We can check here.\n    if (file.size > 32 * 1024 * 1024) {\n        throw new Error(\"File is too large for ImgBB's free tier (max 32MB).\");\n    }\n\n    onProgress(50); // Simulate progress\n    const base64string = await toBase64(file);\n    \n    const formData = new FormData();\n    formData.append('image', base64string);\n\n    const response = await fetch(`https://api.imgbb.com/1/upload?key=${apiKey}`, {\n        method: 'POST',\n        body: formData,\n    });\n    \n    onProgress(100);\n\n    if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`ImgBB upload failed: ${errorData?.error?.message || response.statusText}`);\n    }\n\n    const result = await response.json();\n\n    if (!result.data || !result.data.url) {\n        throw new Error('ImgBB response did not contain a direct image URL.');\n    }\n\n    // Use `result.data.url` which is the direct link to the image.\n    return result.data.url;\n}\n"],"names":[],"mappings":";;;;;;AACA;AAAA;AACA;AAAA;AAFA;;;AAMO,eAAe,iBAClB,MAAc,EACd,MAAc,EACd,IAAU,EACV,UAA8C;IAE9C,MAAM,MAAM,IAAA,8KAAM;IAClB,MAAM,UAAU,IAAA,kMAAU,EAAC;IAC3B,MAAM,YAAY,IAAI,OAAO,OAAO;IACpC,MAAM,cAAc,CAAC,MAAM,EAAE,OAAO,YAAY,EAAE,OAAO,CAAC,EAAE,UAAU,CAAC,EAAE,KAAK,IAAI,EAAE;IACpF,MAAM,aAAa,IAAA,2LAAG,EAAC,SAAS;IAEhC,OAAO,IAAI,QAAQ,CAAC,SAAS;QACzB,MAAM,aAAyB,IAAA,4MAAoB,EAAC,YAAY;QAEhE,WAAW,EAAE,CAAC,iBACV,CAAC;YACG,MAAM,WAAW,AAAC,SAAS,gBAAgB,GAAG,SAAS,UAAU,GAAI;YACrE,WAAW;QACf,GACA,CAAC;YACG,QAAQ,KAAK,CAAC,kBAAkB;YAChC,OAAO;QACX,GACA;YACI,IAAI;gBACA,MAAM,cAAc,MAAM,IAAA,sMAAc,EAAC,WAAW,QAAQ,CAAC,GAAG;gBAChE,QAAQ;YACZ,EAAE,OAAO,OAAO;gBACZ,OAAO;YACX;QACJ;IAER;AACJ;AAEA,SAAS,SAAS,IAAU;IACxB,OAAO,IAAI,QAAQ,CAAC,SAAS;QACzB,MAAM,SAAS,IAAI;QACnB,OAAO,aAAa,CAAC;QACrB,OAAO,MAAM,GAAG;YACZ,mDAAmD;YACnD,wCAAwC;YACxC,IAAI,OAAO,OAAO,MAAM,KAAK,UAAU;gBACnC,OAAO,OAAO;YAClB;YACA,QAAQ,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO,MAAM,CAAC,OAAO,CAAC,OAAO;QACjE;QACA,OAAO,OAAO,GAAG;IACrB;AACJ;AAEO,eAAe,cAClB,IAAU,EACV,UAA8C;IAE9C,MAAM;IACN;;IAIA,uDAAuD;IACvD,IAAI,KAAK,IAAI,GAAG,KAAK,OAAO,MAAM;QAC9B,MAAM,IAAI,MAAM;IACpB;IAEA,WAAW,KAAK,oBAAoB;IACpC,MAAM,eAAe,MAAM,SAAS;IAEpC,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,SAAS;IAEzB,MAAM,WAAW,MAAM,MAAM,CAAC,mCAAmC,EAAE,QAAQ,EAAE;QACzE,QAAQ;QACR,MAAM;IACV;IAEA,WAAW;IAEX,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,YAAY,MAAM,SAAS,IAAI;QACrC,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAE,WAAW,OAAO,WAAW,SAAS,UAAU,EAAE;IAC9F;IAEA,MAAM,SAAS,MAAM,SAAS,IAAI;IAElC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,GAAG,EAAE;QAClC,MAAM,IAAI,MAAM;IACpB;IAEA,+DAA+D;IAC/D,OAAO,OAAO,IAAI,CAAC,GAAG;AAC1B","debugId":null}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/hooks/use-image-uploader.ts"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useToast } from '@/hooks/use-toast';\nimport { uploadToFirebase, uploadToImgBB } from '@/firebase/storage';\nimport imageCompression from 'browser-image-compression';\n\nexport interface ImageUpload {\n    id: string;\n    file: File;\n    status: 'compressing' | 'uploading' | 'complete' | 'error';\n    progress?: number;\n    downloadURL?: string;\n    error?: string;\n}\n\nconst ALLOWED_IMAGE_TYPES = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\nconst MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\n\nexport function useImageUploader(userId: string, noteId: string, method: 'firebase' | 'imgbb') {\n    const [imageUpload, setImageUpload] = useState<ImageUpload | null>(null);\n    const { toast } = useToast();\n\n    const uploadImage = async (file: File) => {\n        if (!userId) {\n            toast({ variant: 'destructive', title: 'Error', description: 'You must be logged in to upload images.' });\n            return;\n        }\n        \n        // Validate file type\n        if (!ALLOWED_IMAGE_TYPES.includes(file.type)) {\n            toast({ \n                variant: 'destructive', \n                title: 'Invalid File Type', \n                description: 'Please upload a valid image file (JPEG, PNG, GIF, or WebP).' \n            });\n            return;\n        }\n        \n        // Validate file size\n        if (file.size > MAX_FILE_SIZE) {\n            toast({ \n                variant: 'destructive', \n                title: 'File Too Large', \n                description: 'Image must be smaller than 10MB.' \n            });\n            return;\n        }\n\n        const uploadId = `upload-${Date.now()}`;\n        setImageUpload({\n            id: uploadId,\n            file,\n            status: 'compressing',\n            progress: 0,\n        });\n\n        try {\n            const options = { maxSizeMB: 1, maxWidthOrHeight: 1920, useWebWorker: true, initialQuality: 0.8 };\n            const compressedFile = await imageCompression(file, options);\n            \n            setImageUpload(prev => prev ? { ...prev, status: 'uploading' } : null);\n\n            let downloadURL: string;\n            \n            if (method === 'firebase') {\n                downloadURL = await uploadToFirebase(userId, noteId, compressedFile, (progress) => {\n                    setImageUpload(prev => prev ? { ...prev, progress } : null);\n                });\n            } else { // 'imgbb'\n                downloadURL = await uploadToImgBB(compressedFile, (progress) => {\n                    setImageUpload(prev => prev ? { ...prev, progress } : null);\n                });\n            }\n            \n            setImageUpload(prev => prev ? { ...prev, status: 'complete', downloadURL } : null);\n\n        } catch (error: any) {\n            console.error(\"Image upload error:\", error);\n            const errorMessage = error.message || 'Upload failed. Please try again.';\n            setImageUpload(prev => prev ? { ...prev, status: 'error', error: errorMessage } : null);\n            toast({\n                variant: 'destructive',\n                title: 'Upload Error',\n                description: errorMessage,\n            });\n        }\n    };\n    \n    const cancelUpload = () => {\n        // In a real app, you might need to cancel the ongoing fetch/upload task.\n        // For simplicity here, we're just clearing the UI state.\n        setImageUpload(null);\n    };\n\n    return {\n        imageUpload,\n        uploadImage,\n        cancelUpload\n    };\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;AAgBA,MAAM,sBAAsB;IAAC;IAAc;IAAa;IAAa;IAAa;CAAa;AAC/F,MAAM,gBAAgB,KAAK,OAAO,MAAM,OAAO;AAExC,SAAS,iBAAiB,MAAc,EAAE,MAAc,EAAE,MAA4B;IACzF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAqB;IACnE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wIAAQ;IAE1B,MAAM,cAAc,OAAO;QACvB,IAAI,CAAC,QAAQ;YACT,MAAM;gBAAE,SAAS;gBAAe,OAAO;gBAAS,aAAa;YAA0C;YACvG;QACJ;QAEA,qBAAqB;QACrB,IAAI,CAAC,oBAAoB,QAAQ,CAAC,KAAK,IAAI,GAAG;YAC1C,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;YACjB;YACA;QACJ;QAEA,qBAAqB;QACrB,IAAI,KAAK,IAAI,GAAG,eAAe;YAC3B,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;YACjB;YACA;QACJ;QAEA,MAAM,WAAW,CAAC,OAAO,EAAE,KAAK,GAAG,IAAI;QACvC,eAAe;YACX,IAAI;YACJ;YACA,QAAQ;YACR,UAAU;QACd;QAEA,IAAI;YACA,MAAM,UAAU;gBAAE,WAAW;gBAAG,kBAAkB;gBAAM,cAAc;gBAAM,gBAAgB;YAAI;YAChG,MAAM,iBAAiB,MAAM,IAAA,sMAAgB,EAAC,MAAM;YAEpD,eAAe,CAAA,OAAQ,OAAO;oBAAE,GAAG,IAAI;oBAAE,QAAQ;gBAAY,IAAI;YAEjE,IAAI;YAEJ,IAAI,WAAW,YAAY;gBACvB,cAAc,MAAM,IAAA,8IAAgB,EAAC,QAAQ,QAAQ,gBAAgB,CAAC;oBAClE,eAAe,CAAA,OAAQ,OAAO;4BAAE,GAAG,IAAI;4BAAE;wBAAS,IAAI;gBAC1D;YACJ,OAAO;gBACH,cAAc,MAAM,IAAA,2IAAa,EAAC,gBAAgB,CAAC;oBAC/C,eAAe,CAAA,OAAQ,OAAO;4BAAE,GAAG,IAAI;4BAAE;wBAAS,IAAI;gBAC1D;YACJ;YAEA,eAAe,CAAA,OAAQ,OAAO;oBAAE,GAAG,IAAI;oBAAE,QAAQ;oBAAY;gBAAY,IAAI;QAEjF,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CAAC,uBAAuB;YACrC,MAAM,eAAe,MAAM,OAAO,IAAI;YACtC,eAAe,CAAA,OAAQ,OAAO;oBAAE,GAAG,IAAI;oBAAE,QAAQ;oBAAS,OAAO;gBAAa,IAAI;YAClF,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;YACjB;QACJ;IACJ;IAEA,MAAM,eAAe;QACjB,yEAAyE;QACzE,yDAAyD;QACzD,eAAe;IACnB;IAEA,OAAO;QACH;QACA;QACA;IACJ;AACJ","debugId":null}},
    {"offset": {"line": 1226, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAqB;QACpB,WAAW,IAAA,yHAAE,EACX,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,2KAAsB;YACrB,WAAW,IAAA,yHAAE,EACX;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,0KAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1261, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1292, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/services/llm/html-editor-agent.ts"],"sourcesContent":["'use server';\nimport { ai } from '@/ai/genkit';\nimport { z } from 'zod';\ntype ModificationType = 'replace' | 'insertAfter' | 'insertBefore' | 'updateText' | 'addImage' | 'appendChild';\n\nexport interface EditInstruction {\n  currentHtml: string;\n  userInstruction: string;\n  imageUrl?: string;\n}\n\nexport interface EditResponse {\n  success: boolean;\n  modifiedHtml?: string;\n  changeDescription?: string;\n  modification?: {\n    targetSelector: string;\n    modificationType: ModificationType;\n    newContent: string;\n    explanation: string;\n    textContent?: string;\n    tagName?: string;\n    index?: number;\n  };\n  error?: string;\n}\n\nconst HtmlModificationSchema = z.object({\n  targetSelector: z.string().describe('CSS selector of the element to modify'),\n  modificationType: z.enum(['replace', 'insertAfter', 'insertBefore', 'updateText', 'addImage', 'appendChild']),\n  newContent: z.string().describe('The new HTML content or text to insert'),\n  explanation: z.string().describe('Brief description of what was changed'),\n  textContent: z.string().optional().describe('Fallback: a short snippet of nearby text to locate the element'),\n  tagName: z.string().optional().describe('Fallback: tag name to narrow the search (e.g., div, h2)'),\n  index: z.number().optional().describe('Fallback: 1-based index among elements with the tagName'),\n});\n\n/**\n * LLM-powered HTML editor that intelligently identifies and modifies specific parts\n */\nexport async function editHtmlWithLLM(instruction: EditInstruction): Promise<EditResponse> {\n  try {\n    // Validate input HTML\n    const validation = validateHtmlServer(instruction.currentHtml);\n    if (!validation.valid) {\n      return {\n        success: false,\n        error: `Invalid HTML: ${validation.errors.join(', ')}`,\n      };\n    }\n\n    // Prepare the prompt for LLM\n    const systemPrompt = `You are an expert HTML editor agent. Your task is to analyze HTML content and user instructions to make precise, targeted modifications.\n\nCRITICAL RULES:\n1. NEVER regenerate the entire HTML document\n2. Identify the EXACT element that needs modification\n3. Provide ONLY the specific content that needs to change\n4. Use precise CSS selectors (prefer ID or class; avoid nth-of-type unless necessary)\n5. Preserve all existing HTML structure, styling, and formatting\n6. For image insertion, if the document contains \".diagram-placeholder\", target that element\n7. Ensure the selector exists in the provided HTML; adjust to an existing class/ID if needed\n8. Also include fallback fields (textContent, tagName, index) that can help locate the target if the selector fails\n\nMODIFICATION TYPES:\n- \"replace\": Replace entire element with new HTML\n- \"updateText\": Change only the text content (preserves tags)\n- \"insertAfter\": Insert new content after the target element\n- \"insertBefore\": Insert new content before the target element\n- \"addImage\": Insert an image after the target element\n- \"appendChild\": Add content as a child of the target element\n\nCurrent HTML Document:\n\\`\\`\\`html\n${instruction.currentHtml}\n\\`\\`\\`\n\nUser Instruction: \"${instruction.userInstruction}\"\n${instruction.imageUrl ? `\\nImage URL to insert: ${instruction.imageUrl}` : ''}\n\nAnalyze the HTML and provide a JSON response with:\n1. targetSelector: The CSS selector for the element to modify\n2. modificationType: One of the types listed above\n3. newContent: The exact HTML/text to insert (keep it minimal)\n4. explanation: Brief description of the change\n\nExample Response:\n{\n  \"targetSelector\": \"h1.main-title\",\n  \"modificationType\": \"updateText\",\n  \"newContent\": \"New Title Text\",\n  \"explanation\": \"Changed the main heading text\"\n}`;\n\n    // Call LLM with retry logic\n    const llmResponse = await retryWithBackoff(async () => {\n      return await ai.generate({\n        prompt: systemPrompt,\n        output: {\n          schema: HtmlModificationSchema,\n        },\n      });\n    });\n\n    // Parse LLM response robustly\n    let modification: z.infer<typeof HtmlModificationSchema> | null = null;\n    const candidate = (llmResponse as any)?.output ?? (llmResponse as any)?.data ?? undefined;\n    if (candidate) {\n      const parsed = HtmlModificationSchema.safeParse(candidate);\n      if (parsed.success) {\n        modification = parsed.data;\n      }\n    }\n    if (!modification) {\n      const text = (llmResponse as any)?.text;\n      if (typeof text === 'string') {\n        try {\n          const json = JSON.parse(text);\n          const parsed = HtmlModificationSchema.safeParse(json);\n          if (parsed.success) {\n            modification = parsed.data;\n          }\n        } catch {\n          // ignore JSON parse errors\n        }\n      }\n    }\n\n    if (!modification) {\n      throw new Error('LLM did not return a valid modification');\n    }\n\n    // If adding an image, use the provided URL\n    let contentToInsert = modification.newContent;\n    if (modification.modificationType === 'addImage' && instruction.imageUrl) {\n      contentToInsert = instruction.imageUrl;\n    }\n\n    // Return modification plan; client will apply DOM changes and sanitize\n    return {\n      success: true,\n      modification: {\n        targetSelector: modification.targetSelector,\n        modificationType: modification.modificationType,\n        newContent: contentToInsert,\n        explanation: modification.explanation,\n        textContent: (modification as any).textContent,\n        tagName: (modification as any).tagName,\n        index: (modification as any).index,\n      },\n      changeDescription: modification.explanation,\n    };\n  } catch (error) {\n    console.error('HTML editing error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred',\n    };\n  }\n}\n\n/**\n * Answer questions about HTML content without modifying it\n */\nexport async function answerQuestionAboutHtml(\n  htmlContent: string,\n  question: string\n): Promise<string> {\n  try {\n    const prompt = `You are a helpful learning assistant. Answer the user's question based ONLY on the provided HTML document content. Do not use external knowledge.\n\nHTML Document Content:\n\\`\\`\\`html\n${htmlContent}\n\\`\\`\\`\n\nUser Question: \"${question}\"\n\nProvide a clear, concise answer based on the document content. If the answer cannot be found in the document, say so.`;\n\n    const response = await retryWithBackoff(async () => {\n      return await ai.generate({ prompt });\n    });\n\n    return response.text;\n  } catch (error) {\n    console.error('Question answering error:', error);\n    throw new Error(`Failed to answer question: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n\n/**\n * Retry helper with exponential backoff\n */\nasync function retryWithBackoff<T>(fn: () => Promise<T>, retries = 3): Promise<T> {\n  for (let i = 0; i < retries; i++) {\n    try {\n      return await fn();\n    } catch (error) {\n      if (i === retries - 1) throw error;\n      const delay = Math.pow(2, i) * 1000;\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  throw new Error('Max retries exceeded');\n}\nfunction validateHtmlServer(html: string): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n  if (!html || html.trim().length === 0) errors.push('HTML content is empty');\n  if (html.length > 5000000) errors.push('HTML content exceeds size limit (5MB)');\n  if (!html.includes('<html') && !html.includes('<body')) errors.push('HTML missing basic structure');\n  return { valid: errors.length === 0, errors };\n}\n"],"names":[],"mappings":";;;;;;;IAwCsB,kBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 1304, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/services/llm/html-editor-agent.ts"],"sourcesContent":["'use server';\nimport { ai } from '@/ai/genkit';\nimport { z } from 'zod';\ntype ModificationType = 'replace' | 'insertAfter' | 'insertBefore' | 'updateText' | 'addImage' | 'appendChild';\n\nexport interface EditInstruction {\n  currentHtml: string;\n  userInstruction: string;\n  imageUrl?: string;\n}\n\nexport interface EditResponse {\n  success: boolean;\n  modifiedHtml?: string;\n  changeDescription?: string;\n  modification?: {\n    targetSelector: string;\n    modificationType: ModificationType;\n    newContent: string;\n    explanation: string;\n    textContent?: string;\n    tagName?: string;\n    index?: number;\n  };\n  error?: string;\n}\n\nconst HtmlModificationSchema = z.object({\n  targetSelector: z.string().describe('CSS selector of the element to modify'),\n  modificationType: z.enum(['replace', 'insertAfter', 'insertBefore', 'updateText', 'addImage', 'appendChild']),\n  newContent: z.string().describe('The new HTML content or text to insert'),\n  explanation: z.string().describe('Brief description of what was changed'),\n  textContent: z.string().optional().describe('Fallback: a short snippet of nearby text to locate the element'),\n  tagName: z.string().optional().describe('Fallback: tag name to narrow the search (e.g., div, h2)'),\n  index: z.number().optional().describe('Fallback: 1-based index among elements with the tagName'),\n});\n\n/**\n * LLM-powered HTML editor that intelligently identifies and modifies specific parts\n */\nexport async function editHtmlWithLLM(instruction: EditInstruction): Promise<EditResponse> {\n  try {\n    // Validate input HTML\n    const validation = validateHtmlServer(instruction.currentHtml);\n    if (!validation.valid) {\n      return {\n        success: false,\n        error: `Invalid HTML: ${validation.errors.join(', ')}`,\n      };\n    }\n\n    // Prepare the prompt for LLM\n    const systemPrompt = `You are an expert HTML editor agent. Your task is to analyze HTML content and user instructions to make precise, targeted modifications.\n\nCRITICAL RULES:\n1. NEVER regenerate the entire HTML document\n2. Identify the EXACT element that needs modification\n3. Provide ONLY the specific content that needs to change\n4. Use precise CSS selectors (prefer ID or class; avoid nth-of-type unless necessary)\n5. Preserve all existing HTML structure, styling, and formatting\n6. For image insertion, if the document contains \".diagram-placeholder\", target that element\n7. Ensure the selector exists in the provided HTML; adjust to an existing class/ID if needed\n8. Also include fallback fields (textContent, tagName, index) that can help locate the target if the selector fails\n\nMODIFICATION TYPES:\n- \"replace\": Replace entire element with new HTML\n- \"updateText\": Change only the text content (preserves tags)\n- \"insertAfter\": Insert new content after the target element\n- \"insertBefore\": Insert new content before the target element\n- \"addImage\": Insert an image after the target element\n- \"appendChild\": Add content as a child of the target element\n\nCurrent HTML Document:\n\\`\\`\\`html\n${instruction.currentHtml}\n\\`\\`\\`\n\nUser Instruction: \"${instruction.userInstruction}\"\n${instruction.imageUrl ? `\\nImage URL to insert: ${instruction.imageUrl}` : ''}\n\nAnalyze the HTML and provide a JSON response with:\n1. targetSelector: The CSS selector for the element to modify\n2. modificationType: One of the types listed above\n3. newContent: The exact HTML/text to insert (keep it minimal)\n4. explanation: Brief description of the change\n\nExample Response:\n{\n  \"targetSelector\": \"h1.main-title\",\n  \"modificationType\": \"updateText\",\n  \"newContent\": \"New Title Text\",\n  \"explanation\": \"Changed the main heading text\"\n}`;\n\n    // Call LLM with retry logic\n    const llmResponse = await retryWithBackoff(async () => {\n      return await ai.generate({\n        prompt: systemPrompt,\n        output: {\n          schema: HtmlModificationSchema,\n        },\n      });\n    });\n\n    // Parse LLM response robustly\n    let modification: z.infer<typeof HtmlModificationSchema> | null = null;\n    const candidate = (llmResponse as any)?.output ?? (llmResponse as any)?.data ?? undefined;\n    if (candidate) {\n      const parsed = HtmlModificationSchema.safeParse(candidate);\n      if (parsed.success) {\n        modification = parsed.data;\n      }\n    }\n    if (!modification) {\n      const text = (llmResponse as any)?.text;\n      if (typeof text === 'string') {\n        try {\n          const json = JSON.parse(text);\n          const parsed = HtmlModificationSchema.safeParse(json);\n          if (parsed.success) {\n            modification = parsed.data;\n          }\n        } catch {\n          // ignore JSON parse errors\n        }\n      }\n    }\n\n    if (!modification) {\n      throw new Error('LLM did not return a valid modification');\n    }\n\n    // If adding an image, use the provided URL\n    let contentToInsert = modification.newContent;\n    if (modification.modificationType === 'addImage' && instruction.imageUrl) {\n      contentToInsert = instruction.imageUrl;\n    }\n\n    // Return modification plan; client will apply DOM changes and sanitize\n    return {\n      success: true,\n      modification: {\n        targetSelector: modification.targetSelector,\n        modificationType: modification.modificationType,\n        newContent: contentToInsert,\n        explanation: modification.explanation,\n        textContent: (modification as any).textContent,\n        tagName: (modification as any).tagName,\n        index: (modification as any).index,\n      },\n      changeDescription: modification.explanation,\n    };\n  } catch (error) {\n    console.error('HTML editing error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred',\n    };\n  }\n}\n\n/**\n * Answer questions about HTML content without modifying it\n */\nexport async function answerQuestionAboutHtml(\n  htmlContent: string,\n  question: string\n): Promise<string> {\n  try {\n    const prompt = `You are a helpful learning assistant. Answer the user's question based ONLY on the provided HTML document content. Do not use external knowledge.\n\nHTML Document Content:\n\\`\\`\\`html\n${htmlContent}\n\\`\\`\\`\n\nUser Question: \"${question}\"\n\nProvide a clear, concise answer based on the document content. If the answer cannot be found in the document, say so.`;\n\n    const response = await retryWithBackoff(async () => {\n      return await ai.generate({ prompt });\n    });\n\n    return response.text;\n  } catch (error) {\n    console.error('Question answering error:', error);\n    throw new Error(`Failed to answer question: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n\n/**\n * Retry helper with exponential backoff\n */\nasync function retryWithBackoff<T>(fn: () => Promise<T>, retries = 3): Promise<T> {\n  for (let i = 0; i < retries; i++) {\n    try {\n      return await fn();\n    } catch (error) {\n      if (i === retries - 1) throw error;\n      const delay = Math.pow(2, i) * 1000;\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  throw new Error('Max retries exceeded');\n}\nfunction validateHtmlServer(html: string): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n  if (!html || html.trim().length === 0) errors.push('HTML content is empty');\n  if (html.length > 5000000) errors.push('HTML content exceeds size limit (5MB)');\n  if (!html.includes('<html') && !html.includes('<body')) errors.push('HTML missing basic structure');\n  return { valid: errors.length === 0, errors };\n}\n"],"names":[],"mappings":";;;;;;;IAoKsB,0BAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 1316, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/services/llm/html-parser.ts"],"sourcesContent":["'use client';\nimport DOMPurify from 'dompurify';\n\nexport type ModificationType = 'replace' | 'insertAfter' | 'insertBefore' | 'updateText' | 'addImage' | 'appendChild';\n\nexport interface HtmlModification {\n  targetSelector: string;\n  modificationType: ModificationType;\n  newContent: string;\n  explanation: string;\n}\n\n/**\n * Apply partial edit to HTML using DOM manipulation\n * This preserves the entire HTML structure and only modifies the targeted element\n */\ntype ElementContext = { selector?: string; textContent?: string; tagName?: string; index?: number };\n\nexport async function applyPartialEdit(\n  currentHtml: string,\n  targetSelector: string,\n  modificationType: ModificationType,\n  newContent: string,\n  context?: ElementContext\n): Promise<string> {\n  try {\n    // Create a DOM parser\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(currentHtml, 'text/html');\n\n    // Fragment-level sanitize options to preserve CSS and scripts inside the iframe document\n    const fragmentSanitizeOptions = {\n      ALLOWED_TAGS: [\n        'html', 'head', 'body', 'title', 'meta', 'link',\n        'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n        'p', 'br', 'hr', 'pre', 'code', 'blockquote',\n        'ul', 'ol', 'li', 'dl', 'dt', 'dd',\n        'table', 'thead', 'tbody', 'tfoot', 'tr', 'th', 'td',\n        'div', 'span', 'section', 'article', 'aside', 'header', 'footer', 'nav', 'main',\n        'a', 'img', 'figure', 'figcaption',\n        'strong', 'em', 'b', 'i', 'u', 's', 'mark', 'small', 'sub', 'sup',\n        'style', 'script',\n      ],\n      ALLOWED_ATTR: [\n        'href', 'src', 'alt', 'title', 'class', 'id', 'style',\n        'width', 'height', 'colspan', 'rowspan',\n        'target', 'rel', 'type', 'charset', 'name', 'content',\n        'async', 'defer', 'crossorigin', 'integrity', 'referrerpolicy',\n      ],\n      ALLOW_DATA_ATTR: false,\n    } as const;\n\n    // Find the target element\n    let targetElement: Element | null = doc.querySelector(targetSelector);\n    \n    if (!targetElement) {\n      const nthMatch = targetSelector.match(/:nth-of-type\\((\\d+)\\)/);\n      if (nthMatch) {\n        const n = parseInt(nthMatch[1], 10);\n        const baseSelector = targetSelector.replace(/:nth-of-type\\(\\d+\\)/g, '');\n        const candidates = doc.querySelectorAll(baseSelector);\n        if (candidates.length >= n) {\n          targetElement = candidates[n - 1] || null;\n        } else if (candidates.length > 0) {\n          targetElement = candidates[0] || null;\n        }\n      }\n    }\n\n    if (!targetElement && targetSelector.includes('.diagram-placeholder')) {\n      const placeholders = doc.querySelectorAll('.diagram-placeholder');\n      if (placeholders.length > 0) {\n        targetElement = placeholders[0];\n      }\n    }\n\n    if (!targetElement) {\n      const altSelector = targetSelector.replace(/:nth-of-type\\((\\d+)\\)/, ':nth-child($1)');\n      targetElement = doc.querySelector(altSelector);\n    }\n\n    if (!targetElement && context) {\n      const candidate = findElementByContext(doc, context);\n      if (candidate) targetElement = candidate;\n    }\n\n    if (!targetElement) {\n      if (modificationType === 'addImage' || modificationType === 'appendChild') {\n        targetElement = doc.body;\n      } else {\n        throw new Error(`Target element not found: ${targetSelector}`);\n      }\n    }\n\n    // Apply modification based on type\n    switch (modificationType) {\n      case 'replace':\n        // Replace entire element\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = DOMPurify.sanitize(newContent, fragmentSanitizeOptions as any) as unknown as string;\n        const newElement = tempDiv.firstElementChild;\n        if (newElement) {\n          targetElement.replaceWith(newElement);\n        }\n        break;\n\n      case 'updateText':\n        // Update only text content\n        targetElement.textContent = newContent;\n        break;\n\n      case 'insertAfter':\n        // Insert new content after target element\n        const afterDiv = document.createElement('div');\n        afterDiv.innerHTML = DOMPurify.sanitize(newContent, fragmentSanitizeOptions as any) as unknown as string;\n        while (afterDiv.firstChild) {\n          targetElement.after(afterDiv.firstChild);\n        }\n        break;\n\n      case 'insertBefore':\n        // Insert new content before target element\n        const beforeDiv = document.createElement('div');\n        beforeDiv.innerHTML = DOMPurify.sanitize(newContent, fragmentSanitizeOptions as any) as unknown as string;\n        while (beforeDiv.firstChild) {\n          targetElement.before(beforeDiv.firstChild);\n        }\n        break;\n\n      case 'addImage':\n        // Create and insert image element\n        const img = document.createElement('img');\n        img.src = newContent;\n        img.alt = 'User added image';\n        img.style.maxWidth = '100%';\n        img.style.height = 'auto';\n        if ((targetElement as HTMLElement).classList?.contains('diagram-placeholder')) {\n          (targetElement as HTMLElement).innerHTML = '';\n          targetElement.appendChild(img);\n        } else {\n          targetElement.after(img);\n        }\n        break;\n\n      case 'appendChild':\n        // Append as child of target element\n        const childDiv = document.createElement('div');\n        childDiv.innerHTML = DOMPurify.sanitize(newContent, fragmentSanitizeOptions as any) as unknown as string;\n        while (childDiv.firstChild) {\n          targetElement.appendChild(childDiv.firstChild);\n        }\n        break;\n\n      default:\n        throw new Error(`Unknown modification type: ${modificationType}`);\n    }\n\n    // Serialize back to HTML\n    const serializer = new XMLSerializer();\n    const modifiedHtml = serializer.serializeToString(doc);\n\n    // Clean up XML declaration if present\n    return modifiedHtml.replace(/<\\?xml[^>]*\\?>/g, '');\n  } catch (error) {\n    console.error('Error applying partial edit:', error);\n    throw new Error(`Failed to apply partial edit: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n/**\n * Find element by various selector strategies\n * Tries multiple approaches to locate the target element\n */\nexport function findElementByContext(\n  doc: Document,\n  context: {\n    selector?: string;\n    textContent?: string;\n    tagName?: string;\n    index?: number;\n  }\n): Element | null {\n  // Try direct selector first\n  if (context.selector) {\n    const element = doc.querySelector(context.selector);\n    if (element) return element;\n  }\n\n  // Try finding by text content\n  if (context.textContent && context.tagName) {\n    const elements = doc.querySelectorAll(context.tagName);\n    for (const el of Array.from(elements)) {\n      if (el.textContent?.includes(context.textContent)) {\n        return el;\n      }\n    }\n  }\n\n  // Try finding by tag name and index\n  if (context.tagName && context.index !== undefined) {\n    const elements = doc.querySelectorAll(context.tagName);\n    return elements[context.index] || null;\n  }\n\n  return null;\n}\n\n/**\n * Extract text content from HTML for LLM context\n * Removes scripts, styles, and returns clean text\n */\nexport function extractTextContent(html: string): string {\n  const parser = new DOMParser();\n  const doc = parser.parseFromString(html, 'text/html');\n\n  // Remove script and style tags\n  const scripts = doc.querySelectorAll('script, style');\n  scripts.forEach(el => el.remove());\n\n  return doc.body.textContent || '';\n}\n\n/**\n * Validate HTML structure\n */\nexport function validateHtml(html: string): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n\n  if (!html || html.trim().length === 0) {\n    errors.push('HTML content is empty');\n  }\n\n  if (html.length > 5000000) { // 5MB limit\n    errors.push('HTML content exceeds size limit (5MB)');\n  }\n\n  // Check for basic HTML structure\n  if (!html.includes('<html') && !html.includes('<body')) {\n    errors.push('HTML missing basic structure');\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n}\n\n/**\n * Sanitize HTML to prevent XSS\n */\nexport function sanitizeHtml(html: string): string {\n  const config = {\n    WHOLE_DOCUMENT: true,\n    ALLOWED_TAGS: [\n      'html', 'head', 'body', 'title', 'meta', 'link',\n      'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n      'p', 'br', 'hr', 'pre', 'code', 'blockquote',\n      'ul', 'ol', 'li', 'dl', 'dt', 'dd',\n      'table', 'thead', 'tbody', 'tfoot', 'tr', 'th', 'td',\n      'div', 'span', 'section', 'article', 'aside', 'header', 'footer', 'nav', 'main',\n      'a', 'img', 'figure', 'figcaption',\n      'strong', 'em', 'b', 'i', 'u', 's', 'mark', 'small', 'sub', 'sup',\n      'style',\n    ],\n    ALLOWED_ATTR: [\n      'href', 'src', 'alt', 'title', 'class', 'id', 'style',\n      'width', 'height', 'colspan', 'rowspan',\n      'target', 'rel', 'type', 'charset', 'name', 'content',\n    ],\n    ALLOW_DATA_ATTR: false,\n  } as any;\n  return DOMPurify.sanitize(html, config) as unknown as string;\n}\n\n/**\n * Generate CSS selector for an element\n */\nexport function generateSelector(element: Element): string {\n  // If element has ID, use it\n  if (element.id) {\n    return `#${element.id}`;\n  }\n\n  // If element has unique class\n  if (element.className) {\n    const classes = element.className.split(' ').filter(c => c.trim());\n    if (classes.length > 0) {\n      return `.${classes[0]}`;\n    }\n  }\n\n  // Use tag name with nth-of-type\n  const parent = element.parentElement;\n  if (parent) {\n    const siblings = Array.from(parent.children).filter(\n      el => el.tagName === element.tagName\n    );\n    const index = siblings.indexOf(element) + 1;\n    return `${element.tagName.toLowerCase()}:nth-of-type(${index})`;\n  }\n\n  return element.tagName.toLowerCase();\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1681, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/dashboard/assistant-sidebar-new.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription, SheetFooter } from '@/components/ui/sheet';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Bot, Loader2, Send, Paperclip, Trash2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar';\nimport { cn } from '@/lib/utils';\nimport { useUser, useFirestore, useCollection, useMemoFirebase } from '@/firebase';\nimport { saveChatMessage, clearChatHistory } from '@/firebase/firestore/chat';\nimport { collection, query, orderBy, Timestamp } from 'firebase/firestore';\nimport { format } from 'date-fns';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '../ui/alert-dialog';\nimport ImageUploadCard from './image-upload-card';\nimport { useImageUploader } from '@/hooks/use-image-uploader';\nimport { Switch } from '../ui/switch';\nimport { Label } from '../ui/label';\nimport { editHtmlWithLLM, answerQuestionAboutHtml } from '@/services/llm/html-editor-agent';\nimport { applyPartialEdit, sanitizeHtml, type ModificationType } from '@/services/llm/html-parser';\n\n/**\n * Determine if user instruction requires HTML modification or just a question\n */\nfunction isModificationRequest(instruction: string): boolean {\n  const modificationKeywords = [\n    'change', 'modify', 'edit', 'update', 'replace', 'add', 'insert',\n    'remove', 'delete', 'move', 'rewrite', 'fix', 'correct',\n    'make', 'create', 'put', 'place', 'set',\n  ];\n\n  const lowerInstruction = instruction.toLowerCase();\n  return modificationKeywords.some(keyword => lowerInstruction.includes(keyword));\n}\n\ntype Note = {\n  id: string;\n  title: string;\n  description: string;\n  week: number;\n  lesson: number;\n  tags: string[];\n  dateAdded: string;\n  readTime: string;\n  htmlFile: string;\n};\n\ntype AssistantSidebarProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  note: Note;\n  currentHtmlContent: string;\n  onHtmlContentUpdate: (newHtml: string) => void;\n};\n\ntype Message = {\n    id: string;\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp: Timestamp;\n    imageUrl?: string;\n}\n\nexport default function AssistantSidebarNew({ isOpen, onClose, note, currentHtmlContent, onHtmlContentUpdate }: AssistantSidebarProps) {\n  const [messages, setMessages] = React.useState<Message[]>([]);\n  const [input, setInput] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const { toast } = useToast();\n  const { user, isUserLoading } = useUser();\n  const firestore = useFirestore();\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n  const scrollAreaRef = React.useRef<HTMLDivElement>(null);\n  \n  // Track the current HTML content for LLM context\n  const currentHtmlRef = React.useRef(currentHtmlContent);\n  React.useEffect(() => {\n    currentHtmlRef.current = currentHtmlContent;\n  }, [currentHtmlContent]);\n  \n  const [uploadMethod, setUploadMethod] = React.useState<'firebase' | 'imgbb'>('firebase');\n  const { imageUpload, uploadImage, cancelUpload } = useImageUploader(user?.uid || '', note.id, uploadMethod);\n\n  const chatHistoryQuery = useMemoFirebase(() => {\n    if (!user || !note) return null;\n    return query(collection(firestore, `users/${user.uid}/noteChats/${note.id}/messages`), orderBy('timestamp', 'asc'));\n  }, [firestore, user, note]);\n\n  const { data: chatHistory, isLoading: isHistoryLoading } = useCollection<Omit<Message, 'id'>>(chatHistoryQuery);\n\n   React.useEffect(() => {\n    if (chatHistory) {\n      setMessages(chatHistory);\n    }\n  }, [chatHistory]);\n\n  React.useEffect(() => {\n    // Only show welcome message if there's no chat history and we're not loading\n    if (isOpen && !isHistoryLoading && messages.length === 0 && !imageUpload && chatHistory && chatHistory.length === 0) {\n      const welcomeMessage = {\n        id: 'welcome',\n        role: 'assistant' as const,\n        content: `Hello! I'm your AI assistant for \"${note.title}\". Ask me anything about this note or ask me to edit it.\\n\\nI can help you:\\n Answer questions about the content\\n Modify specific parts of the note\\n Add images or links\\n Reorganize sections`,\n        timestamp: Timestamp.now()\n      };\n      setMessages([welcomeMessage]);\n    }\n  }, [isOpen, note.title, isHistoryLoading, messages.length, imageUpload, chatHistory]);\n  \n  React.useEffect(() => {\n    if (scrollAreaRef.current) {\n        scrollAreaRef.current.scrollTo({\n            top: scrollAreaRef.current.scrollHeight,\n            behavior: 'smooth'\n        });\n    }\n  }, [messages, imageUpload, isLoading]);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      uploadImage(file);\n    }\n    if(fileInputRef.current) {\n        fileInputRef.current.value = '';\n    }\n  };\n\n  const callAssistant = async (question: string, imageUrl?: string) => {\n    setIsLoading(true);\n    \n    if (!user || !firestore) {\n        toast({ variant: 'destructive', title: 'Authentication Error', description: 'Please log in to use the assistant.' });\n        setIsLoading(false);\n        return;\n    }\n\n    try {\n        // Save user message\n        await saveChatMessage(firestore, user.uid, note.id, 'user', question, imageUrl);\n\n        // Determine if this is a modification request or a question\n        const isModification = isModificationRequest(question) || imageUrl;\n\n        let assistantResponse: string;\n        let htmlWasModified = false;\n\n        if (isModification) {\n            const editResult = await editHtmlWithLLM({\n                currentHtml: currentHtmlRef.current,\n                userInstruction: question,\n                imageUrl,\n            });\n\n            if (editResult.success) {\n                let updatedHtml: string | null = null;\n                if (editResult.modifiedHtml) {\n                    updatedHtml = editResult.modifiedHtml;\n                } else if (editResult.modification) {\n                    const m = editResult.modification;\n                    try {\n                        const applied = await applyPartialEdit(\n                            currentHtmlRef.current,\n                            m.targetSelector,\n                            m.modificationType as ModificationType,\n                            m.newContent,\n                            {\n                                selector: m.targetSelector,\n                                textContent: (m as any).textContent,\n                                tagName: (m as any).tagName,\n                                index: (m as any).index,\n                            }\n                        );\n                        updatedHtml = sanitizeHtml(applied);\n                    } catch (e: any) {\n                        const msg = typeof e?.message === 'string' ? e.message : '';\n                        if (msg.includes('Target element not found')) {\n                            assistantResponse = 'I could not find the exact place to insert. Please specify a nearby heading or add a placeholder element with class \"diagram-placeholder\" and try again.';\n                        } else {\n                            assistantResponse = `I encountered an error while applying the edit: ${msg || 'Unknown error'}`;\n                        }\n                        updatedHtml = null;\n                    }\n                }\n\n                if (updatedHtml) {\n                    onHtmlContentUpdate(updatedHtml);\n                    htmlWasModified = true;\n                    assistantResponse = ` ${editResult.changeDescription || 'I\\'ve made the requested changes to your note.'}`;\n                } else {\n                    assistantResponse = `I encountered an error: ${editResult.error || 'No modification was returned.'}`;\n                }\n            } else {\n                assistantResponse = `I encountered an error: ${editResult.error || 'Could not modify the HTML.'}`;\n            }\n        } else {\n            // Answer question about the content\n            assistantResponse = await answerQuestionAboutHtml(\n                currentHtmlRef.current,\n                question\n            );\n        }\n\n        // Save assistant response\n        await saveChatMessage(firestore, user.uid, note.id, 'assistant', assistantResponse);\n\n        if (htmlWasModified) {\n            toast({\n                title: 'Changes Applied',\n                description: 'Your note has been updated. Changes are saved automatically.',\n            });\n        }\n    } catch (error: any) {\n        console.error(\"Assistant error:\", error);\n        \n        let errorMessage = \"Sorry, I encountered an error. Please try again.\";\n        let errorTitle = 'Assistant Error';\n        \n        if (error.message?.includes('timeout')) {\n            errorMessage = \"The request took too long. Please try again with a simpler question.\";\n            errorTitle = 'Timeout Error';\n        } else if (error.message?.includes('API')) {\n            errorMessage = \"There was an issue with the AI service. Please check your API key.\";\n            errorTitle = 'API Error';\n        }\n        \n        await saveChatMessage(firestore, user.uid, note.id, 'assistant', errorMessage);\n        toast({\n            variant: 'destructive',\n            title: errorTitle,\n            description: errorMessage\n        });\n    } finally {\n        setIsLoading(false);\n    }\n};\n\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim() || isLoading) return;\n    const currentInput = input;\n    setInput('');\n    await callAssistant(currentInput);\n  };\n  \n  const handleImageInstructionSubmit = async (instruction: string) => {\n    if (!instruction.trim() || !imageUpload || imageUpload.status !== 'complete' || !imageUpload.downloadURL) return;\n    \n    const fullQuestion = instruction;\n    \n    // This will clear the card and re-enable the main input\n    cancelUpload();\n\n    await callAssistant(fullQuestion, imageUpload.downloadURL);\n};\n\n\n  const handleClearHistory = async () => {\n    if(!user || !firestore) return;\n    try {\n      await clearChatHistory(firestore, user.uid, note.id);\n      const welcomeMessage = {\n        id: 'welcome-cleared',\n        role: 'assistant' as const,\n        content: `Hello! I'm your AI assistant for \"${note.title}\". Ask me anything about this note or ask me to edit it.`,\n        timestamp: Timestamp.now()\n      };\n      setMessages([welcomeMessage]);\n       toast({ title: 'Chat history cleared' });\n    } catch(error) {\n       console.error(\"Failed to clear chat history:\", error);\n       toast({ variant: 'destructive', title: 'Error', description: 'Could not clear chat history.' });\n    }\n  }\n\n  const getInitials = (name?: string | null) => {\n    if (!name) return 'U';\n    const names = name.split(' ');\n    if (names.length > 1) {\n      return `${names[0][0]}${names[names.length - 1][0]}`.toUpperCase();\n    }\n    return name.substring(0, 2).toUpperCase();\n  }\n  \n  const isChatDisabled = isUserLoading || !user;\n\n  return (\n    <Sheet open={isOpen} onOpenChange={onClose}>\n      <SheetContent className=\"w-full sm:max-w-md flex flex-col p-0\">\n        <SheetHeader className=\"p-4 border-b\">\n          <SheetTitle>AI Assistant</SheetTitle>\n          <SheetDescription>Ask questions or request edits for '{note.title}'</SheetDescription>\n        </SheetHeader>\n        <ScrollArea className=\"flex-1\" ref={scrollAreaRef}>\n            <div className=\"space-y-6 p-4\">\n                {isHistoryLoading && <div className=\"flex justify-center p-4\"><Loader2 className=\"h-6 w-6 animate-spin\" /></div>}\n                {messages.map((message) => (\n                    <div key={message.id} className={cn(\"flex items-start gap-3\", message.role === 'user' ? 'justify-end' : '')}>\n                        {message.role === 'assistant' && (\n                            <Avatar className=\"h-8 w-8\">\n                                <AvatarFallback><Bot className=\"h-5 w-5\" /></AvatarFallback>\n                            </Avatar>\n                        )}\n                        <div className={cn(\"rounded-lg p-3 max-w-xs md:max-w-sm\", message.role === 'user' ? 'bg-primary text-primary-foreground' : 'bg-muted')}>\n                            <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                             <p className=\"text-xs mt-2 opacity-60 text-right\">{message.timestamp ? format(message.timestamp.toDate(), 'p') : ''}</p>\n                        </div>\n                         {message.role === 'user' && (\n                            <Avatar className=\"h-8 w-8\">\n                                <AvatarImage src={user?.photoURL || ''} />\n                                <AvatarFallback>{getInitials(user?.displayName)}</AvatarFallback>\n                            </Avatar>\n                        )}\n                    </div>\n                ))}\n                 {imageUpload && (\n                  <div className=\"flex items-start gap-3\">\n                     <Avatar className=\"h-8 w-8\">\n                        <AvatarFallback><Bot className=\"h-5 w-5\" /></AvatarFallback>\n                    </Avatar>\n                    <ImageUploadCard\n                        upload={imageUpload}\n                        onInstructionSubmit={handleImageInstructionSubmit}\n                        onCancel={cancelUpload}\n                    />\n                  </div>\n                )}\n                 {(isLoading || isChatDisabled) && messages.length > 0 && messages[messages.length - 1].role === 'user' && (\n                    <div className=\"flex items-start gap-3\">\n                         <Avatar className=\"h-8 w-8\">\n                            <AvatarFallback><Bot className=\"h-5 w-5\" /></AvatarFallback>\n                        </Avatar>\n                         <div className=\"rounded-lg p-3 bg-muted flex items-center\">\n                            <Loader2 className=\"h-5 w-5 animate-spin\" />\n                         </div>\n                    </div>\n                 )}\n            </div>\n        </ScrollArea>\n        <SheetFooter className=\"p-4 border-t flex-col sm:flex-col sm:space-x-0 gap-4\">\n          <div className=\"flex items-center space-x-2 self-center\">\n            <Label htmlFor=\"upload-method\" className={cn(uploadMethod === 'firebase' ? 'text-foreground' : 'text-muted-foreground')}>Firebase</Label>\n            <Switch\n                id=\"upload-method\"\n                checked={uploadMethod === 'imgbb'}\n                onCheckedChange={(checked) => setUploadMethod(checked ? 'imgbb' : 'firebase')}\n                disabled={!!imageUpload || isLoading || isChatDisabled}\n            />\n            <Label htmlFor=\"upload-method\" className={cn(uploadMethod === 'imgbb' ? 'text-foreground' : 'text-muted-foreground')}>ImgBB</Label>\n          </div>\n          <form onSubmit={handleSubmit} className=\"flex items-center gap-2\">\n            <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" accept=\"image/*\" />\n            <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={() => fileInputRef.current?.click()} disabled={isLoading || !!imageUpload || isChatDisabled}>\n                <Paperclip className=\"h-4 w-4\" />\n                <span className=\"sr-only\">Attach image</span>\n            </Button>\n            <Input\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Ask a question or request an edit...\"\n              disabled={isLoading || !!imageUpload || isChatDisabled}\n            />\n            <Button type=\"submit\" disabled={isLoading || !input.trim() || !!imageUpload || isChatDisabled}>\n                {isLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Send className=\"h-4 w-4\" />}\n            </Button>\n          </form>\n           {messages.length > 1 && (\n            <div className=\"flex justify-center\">\n                <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" disabled={isChatDisabled}>\n                            <Trash2 className=\"mr-2 h-4 w-4\" />\n                            Clear Chat\n                        </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                        <AlertDialogHeader>\n                            <AlertDialogTitle>Are you sure?</AlertDialogTitle>\n                            <AlertDialogDescription>\n                                This will permanently delete the chat history for this note. This action cannot be undone.\n                            </AlertDialogDescription>\n                        </AlertDialogHeader>\n                        <AlertDialogFooter>\n                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                            <AlertDialogAction onClick={handleClearHistory}>Confirm Clear</AlertDialogAction>\n                        </AlertDialogFooter>\n                    </AlertDialogContent>\n                </AlertDialog>\n            </div>\n           )}\n        </SheetFooter>\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2435, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/auth/auth-guard.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { useUser } from '@/firebase';\nimport { Skeleton } from '@/components/ui/skeleton';\n\ninterface AuthGuardProps {\n  children: React.ReactNode;\n}\n\n/**\n * AuthGuard component that protects routes requiring authentication\n * Redirects unauthenticated users to sign-in page with return URL\n */\nexport function AuthGuard({ children }: AuthGuardProps) {\n  const { user, isUserLoading } = useUser();\n  const router = useRouter();\n  const pathname = usePathname();\n\n  useEffect(() => {\n    if (!isUserLoading && !user) {\n      // Store the intended destination for post-login redirect\n      const returnUrl = encodeURIComponent(pathname);\n      router.push(`/signin?returnUrl=${returnUrl}`);\n    }\n  }, [user, isUserLoading, router, pathname]);\n\n  // Show loading skeleton while checking auth state\n  if (isUserLoading) {\n    return (\n      <div className=\"flex h-screen w-full bg-background\">\n        <div className=\"hidden md:block w-64 border-r p-4\">\n          <Skeleton className=\"h-8 w-32 mb-8\" />\n          <div className=\"space-y-4\">\n            <Skeleton className=\"h-10 w-full\" />\n            <Skeleton className=\"h-10 w-full\" />\n            <Skeleton className=\"h-10 w-full\" />\n            <Skeleton className=\"h-10 w-full\" />\n          </div>\n        </div>\n        <div className=\"flex-1 p-8\">\n          <Skeleton className=\"h-12 w-1/3 mb-8\" />\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            <Skeleton className=\"h-48 w-full\" />\n            <Skeleton className=\"h-48 w-full\" />\n            <Skeleton className=\"h-48 w-full\" />\n            <Skeleton className=\"h-48 w-full\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Don't render children if user is not authenticated (redirect in progress)\n  if (!user) {\n    return null;\n  }\n\n  // User is authenticated, render protected content\n  return <>{children}</>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAeO,SAAS,UAAU,EAAE,QAAQ,EAAkB;IACpD,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,IAAA,uIAAO;IACvC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,iBAAiB,CAAC,MAAM;YAC3B,yDAAyD;YACzD,MAAM,YAAY,mBAAmB;YACrC,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,WAAW;QAC9C;IACF,GAAG;QAAC;QAAM;QAAe;QAAQ;KAAS;IAE1C,kDAAkD;IAClD,IAAI,eAAe;QACjB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,gJAAQ;4BAAC,WAAU;;;;;;sCACpB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;;;8BAGxB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,gJAAQ;4BAAC,WAAU;;;;;;sCACpB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC,gJAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;IAK9B;IAEA,4EAA4E;IAC5E,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,kDAAkD;IAClD,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 2598, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/services/firebase/html-storage.ts"],"sourcesContent":["'use client';\nimport { getApp } from 'firebase/app';\nimport { getFirestore, doc, setDoc, getDoc, deleteDoc, collection, getDocs, serverTimestamp } from 'firebase/firestore';\n\nexport interface ModifiedHtmlMetadata {\n  userId: string;\n  week: string;\n  lectureId: string;\n  lastModified: number;\n}\n\n/**\n * Save modified HTML to Firebase Storage\n * Path: users/{userId}/modified-notes/{week}/{lectureId}.html\n */\nexport async function saveModifiedHtml(\n  userId: string,\n  week: string,\n  lectureId: string,\n  htmlContent: string\n): Promise<string> {\n  try {\n    const app = getApp();\n    const firestore = getFirestore(app);\n    const docRef = doc(firestore, `users/${userId}/notes/${lectureId}`);\n    await setDoc(docRef, {\n      modifiedHtml: htmlContent,\n      lastModified: serverTimestamp(),\n    });\n    // Return the document path for compatibility with previous string return type\n    return docRef.path;\n  } catch (error) {\n    console.error('Error saving modified HTML:', error);\n    throw new Error(`Failed to save modified HTML: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n/**\n * Load user's modified HTML from Firebase Storage\n * Returns null if no modified version exists\n */\nexport async function loadModifiedHtml(\n  userId: string,\n  week: string,\n  lectureId: string\n): Promise<string | null> {\n  try {\n    const app = getApp();\n    const firestore = getFirestore(app);\n    const docRef = doc(firestore, `users/${userId}/notes/${lectureId}`);\n    const snapshot = await getDoc(docRef);\n    if (!snapshot.exists()) {\n      return null;\n    }\n    const data = snapshot.data();\n    if (typeof data?.modifiedHtml === 'string') {\n      return data.modifiedHtml as string;\n    }\n    return null;\n  } catch (error: any) {\n    console.error('Error loading modified HTML:', error);\n    return null;\n  }\n}\n\n/**\n * Check if modified version exists for this user\n * Note: This just attempts to load - if it fails, file doesn't exist\n */\nexport async function hasModifiedVersion(\n  userId: string,\n  week: string,\n  lectureId: string\n): Promise<boolean> {\n  try {\n    const html = await loadModifiedHtml(userId, week, lectureId);\n    return html !== null;\n  } catch (error: any) {\n    return false;\n  }\n}\n\n/**\n * Delete user's modified version (reset to original)\n */\nexport async function deleteModifiedHtml(\n  userId: string,\n  week: string,\n  lectureId: string\n): Promise<void> {\n  try {\n    const app = getApp();\n    const firestore = getFirestore(app);\n    const docRef = doc(firestore, `users/${userId}/notes/${lectureId}`);\n    await deleteDoc(docRef);\n  } catch (error: any) {\n    console.error('Error deleting modified HTML:', error);\n    throw new Error(`Failed to delete modified HTML: ${error.message}`);\n  }\n}\n\n/**\n * Load original HTML from codebase\n * Path: /notes/{course}/{lectureId}.html\n */\nexport async function loadOriginalHtml(\n  course: string,\n  week: string,\n  lectureId: string\n): Promise<string> {\n  try {\n    // Files are stored as /notes/{course}/{lectureId}.html (no week folder)\n    const filePath = `/notes/${course}/${encodeURIComponent(lectureId)}.html`;\n    const response = await fetch(filePath, {\n      cache: 'force-cache', // Cache original HTML files\n    });\n    \n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const htmlContent = await response.text();\n    return htmlContent;\n  } catch (error) {\n    console.error('Error loading original HTML:', error);\n    throw new Error(`Failed to load original HTML: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\n/**\n * Get all modified notes for a user\n */\nexport async function listModifiedNotes(userId: string): Promise<ModifiedHtmlMetadata[]> {\n  try {\n    const app = getApp();\n    const firestore = getFirestore(app);\n    const notesCol = collection(firestore, `users/${userId}/notes`);\n    const snapshot = await getDocs(notesCol);\n    const metadata: ModifiedHtmlMetadata[] = [];\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data() as any;\n      const lm = data?.lastModified && typeof data.lastModified.toMillis === 'function'\n        ? data.lastModified.toMillis()\n        : Date.now();\n      metadata.push({\n        userId,\n        week: '',\n        lectureId: docSnap.id,\n        lastModified: lm,\n      });\n    });\n    return metadata;\n  } catch (error) {\n    console.error('Error listing modified notes:', error);\n    return [];\n  }\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2717, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/hooks/use-note-preview.ts"],"sourcesContent":["'use client';\nimport { useState, useEffect, useCallback } from 'react';\nimport { loadModifiedHtml, loadOriginalHtml } from '@/services/firebase/html-storage';\n\nexport interface NotePreviewState {\n  htmlContent: string | null;\n  isModified: boolean;\n  loading: boolean;\n  error: string | null;\n}\n\nexport interface NotePreviewActions {\n  reload: () => Promise<void>;\n  updateHtml: (newHtml: string) => void;\n}\n\n/**\n * Hook for managing note preview with cascading load logic\n * \n * Load Priority:\n * 1. Check Firebase Storage for user's modified version\n * 2. If not found, load original from codebase\n * \n * @param userId - Current user ID\n * @param course - Course identifier (e.g., 'fsp', 'ata')\n * @param week - Week identifier (e.g., 'week1')\n * @param lectureId - Lecture identifier (e.g., 'FSPW1')\n */\nexport function useNotePreview(\n  userId: string | undefined,\n  course: string,\n  week: string,\n  lectureId: string\n): NotePreviewState & NotePreviewActions {\n  const [state, setState] = useState<NotePreviewState>({\n    htmlContent: null,\n    isModified: false,\n    loading: true,\n    error: null,\n  });\n\n  const loadHtmlContent = useCallback(async () => {\n    if (!userId) {\n      // Don't set error - just stay in loading state until user is available\n      setState({\n        htmlContent: null,\n        isModified: false,\n        loading: true,\n        error: null,\n      });\n      return;\n    }\n\n    setState(prev => ({ ...prev, loading: true, error: null }));\n\n    try {\n      // Try to load modified version first (will return null if doesn't exist)\n      const modifiedHtml = await loadModifiedHtml(userId, week, lectureId);\n      \n      if (modifiedHtml) {\n        setState({\n          htmlContent: modifiedHtml,\n          isModified: true,\n          loading: false,\n          error: null,\n        });\n        return;\n      }\n\n      // Fall back to original from codebase\n      const originalHtml = await loadOriginalHtml(course, week, lectureId);\n      \n      setState({\n        htmlContent: originalHtml,\n        isModified: false,\n        loading: false,\n        error: null,\n      });\n    } catch (error) {\n      console.error('Error loading note preview:', error);\n      setState({\n        htmlContent: null,\n        isModified: false,\n        loading: false,\n        error: error instanceof Error ? error.message : 'Failed to load note',\n      });\n    }\n  }, [userId, course, week, lectureId]);\n\n  // Load HTML content on mount and when dependencies change\n  useEffect(() => {\n    loadHtmlContent();\n  }, [loadHtmlContent]);\n\n  // Function to reload content\n  const reload = useCallback(async () => {\n    await loadHtmlContent();\n  }, [loadHtmlContent]);\n\n  // Function to update HTML content in state (without saving)\n  const updateHtml = useCallback((newHtml: string) => {\n    setState(prev => ({\n      ...prev,\n      htmlContent: newHtml,\n      isModified: true,\n    }));\n  }, []);\n\n  return {\n    ...state,\n    reload,\n    updateHtml,\n  };\n}\n\n/**\n * Cache for original HTML files (they never change)\n */\nconst originalHtmlCache = new Map<string, string>();\n\n/**\n * Load original HTML with caching\n */\nexport async function loadOriginalHtmlCached(\n  course: string,\n  week: string,\n  lectureId: string\n): Promise<string> {\n  const cacheKey = `${course}/${week}/${lectureId}`;\n  \n  // Check cache first\n  if (originalHtmlCache.has(cacheKey)) {\n    return originalHtmlCache.get(cacheKey)!;\n  }\n\n  // Load from file\n  const html = await loadOriginalHtml(course, week, lectureId);\n  \n  // Cache it\n  originalHtmlCache.set(cacheKey, html);\n  \n  return html;\n}\n\n/**\n * Clear the original HTML cache (useful for development)\n */\nexport function clearOriginalHtmlCache(): void {\n  originalHtmlCache.clear();\n}\n"],"names":[],"mappings":";;;;;;;;AACA;AACA;AAFA;;;AA4BO,SAAS,eACd,MAA0B,EAC1B,MAAc,EACd,IAAY,EACZ,SAAiB;IAEjB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAmB;QACnD,aAAa;QACb,YAAY;QACZ,SAAS;QACT,OAAO;IACT;IAEA,MAAM,kBAAkB,IAAA,oNAAW,EAAC;QAClC,IAAI,CAAC,QAAQ;YACX,uEAAuE;YACvE,SAAS;gBACP,aAAa;gBACb,YAAY;gBACZ,SAAS;gBACT,OAAO;YACT;YACA;QACF;QAEA,SAAS,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,SAAS;gBAAM,OAAO;YAAK,CAAC;QAEzD,IAAI;YACF,yEAAyE;YACzE,MAAM,eAAe,MAAM,IAAA,kKAAgB,EAAC,QAAQ,MAAM;YAE1D,IAAI,cAAc;gBAChB,SAAS;oBACP,aAAa;oBACb,YAAY;oBACZ,SAAS;oBACT,OAAO;gBACT;gBACA;YACF;YAEA,sCAAsC;YACtC,MAAM,eAAe,MAAM,IAAA,kKAAgB,EAAC,QAAQ,MAAM;YAE1D,SAAS;gBACP,aAAa;gBACb,YAAY;gBACZ,SAAS;gBACT,OAAO;YACT;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,SAAS;gBACP,aAAa;gBACb,YAAY;gBACZ,SAAS;gBACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD;QACF;IACF,GAAG;QAAC;QAAQ;QAAQ;QAAM;KAAU;IAEpC,0DAA0D;IAC1D,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAgB;IAEpB,6BAA6B;IAC7B,MAAM,SAAS,IAAA,oNAAW,EAAC;QACzB,MAAM;IACR,GAAG;QAAC;KAAgB;IAEpB,4DAA4D;IAC5D,MAAM,aAAa,IAAA,oNAAW,EAAC,CAAC;QAC9B,SAAS,CAAA,OAAQ,CAAC;gBAChB,GAAG,IAAI;gBACP,aAAa;gBACb,YAAY;YACd,CAAC;IACH,GAAG,EAAE;IAEL,OAAO;QACL,GAAG,KAAK;QACR;QACA;IACF;AACF;AAEA;;CAEC,GACD,MAAM,oBAAoB,IAAI;AAKvB,eAAe,uBACpB,MAAc,EACd,IAAY,EACZ,SAAiB;IAEjB,MAAM,WAAW,GAAG,OAAO,CAAC,EAAE,KAAK,CAAC,EAAE,WAAW;IAEjD,oBAAoB;IACpB,IAAI,kBAAkB,GAAG,CAAC,WAAW;QACnC,OAAO,kBAAkB,GAAG,CAAC;IAC/B;IAEA,iBAAiB;IACjB,MAAM,OAAO,MAAM,IAAA,kKAAgB,EAAC,QAAQ,MAAM;IAElD,WAAW;IACX,kBAAkB,GAAG,CAAC,UAAU;IAEhC,OAAO;AACT;AAKO,SAAS;IACd,kBAAkB,KAAK;AACzB","debugId":null}},
    {"offset": {"line": 2836, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 2878, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/components/dashboard/note-preview-layout.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { useUser, useAuth } from '@/firebase';\nimport { signOut } from 'firebase/auth';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Button } from '../ui/button';\nimport Link from 'next/link';\nimport { ArrowLeft, Printer, Download, ChevronLeft, ChevronRight, Star, RotateCcw, Maximize2, Minimize2 } from 'lucide-react';\nimport { notFound } from 'next/navigation';\nimport AssistantSidebarNew from './assistant-sidebar-new';\nimport { useToast } from '@/hooks/use-toast';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '../ui/alert-dialog';\nimport { AuthGuard } from '@/components/auth/auth-guard';\nimport { useNotePreview } from '@/hooks/use-note-preview';\nimport { saveModifiedHtml, deleteModifiedHtml } from '@/services/firebase/html-storage';\nimport { Badge } from '../ui/badge';\n\n\ntype Note = {\n  id: string;\n  title: string;\n  description:string;\n  week: number;\n  lesson: number;\n  tags: string[];\n  dateAdded: string;\n  readTime: string;\n  htmlFile: string;\n} | undefined;\n\ntype NotePreviewLayoutProps = {\n  courseName: string;\n  courseTitle: string;\n  note: Note;\n  coursePath: string;\n};\n\nexport default function NotePreviewLayout({ courseName, courseTitle, note, coursePath }: NotePreviewLayoutProps) {\n  const { user, isUserLoading } = useUser();\n  const auth = useAuth();\n  const { toast } = useToast();\n  \n  const [isAssistantOpen, setIsAssistantOpen] = React.useState(false);\n  const [isSaving, setIsSaving] = React.useState(false);\n  const [isFullscreen, setIsFullscreen] = React.useState(false);\n  const previewContainerRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    const handler = () => setIsFullscreen(!!document.fullscreenElement);\n    document.addEventListener('fullscreenchange', handler);\n    return () => document.removeEventListener('fullscreenchange', handler);\n  }, []);\n\n  // Extract course identifier from coursePath (e.g., '/dashboard/fsp' -> 'fsp')\n  const courseId = coursePath.split('/').pop() || '';\n  const weekId = `week${note?.week || 1}`;\n  const lectureId = note?.id || '';\n\n  // Use the new cascading load logic hook - wait for auth to complete\n  const { htmlContent, isModified, loading, error, reload, updateHtml } = useNotePreview(\n    isUserLoading ? undefined : user?.uid,\n    courseId,\n    weekId,\n    lectureId\n  );\n\n  // Show error toast if loading failed\n  React.useEffect(() => {\n    if (error) {\n      toast({ variant: 'destructive', title: 'Error', description: error });\n    }\n  }, [error, toast]);\n\n\n\n  if (!note) {\n    notFound();\n  }\n\n  const handleAssistantClick = () => {\n    // Open assistant directly - using server-side Gemini API key\n    setIsAssistantOpen(true);\n  };\n\n  const handleToggleFullscreen = () => {\n    const el = previewContainerRef.current;\n    if (!el) return;\n    if (document.fullscreenElement) {\n      if (document.exitFullscreen) document.exitFullscreen();\n    } else {\n      if (el.requestFullscreen) {\n        el.requestFullscreen();\n      } else {\n        (el as any).webkitRequestFullscreen?.();\n        (el as any).msRequestFullscreen?.();\n      }\n    }\n  };\n\n  const buildExportHtml = (html: string) => {\n    if (!html) return '';\n    if (html.includes('<html')) return html;\n    return `<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"></head><body>${html}</body></html>`;\n  };\n\n  const handleDownload = () => {\n    const content = buildExportHtml(currentHtmlContent || '');\n    const blob = new Blob([content], { type: 'text/html;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${lectureId}${isModified ? '-edited' : ''}.html`;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n    URL.revokeObjectURL(url);\n  };\n\n  const handleHtmlUpdate = async (newHtml: string) => {\n    if (!user) return;\n    \n    setIsSaving(true);\n    try {\n      // Update local state immediately for instant preview\n      updateHtml(newHtml);\n      \n      // Save to Firebase Storage\n      await saveModifiedHtml(user.uid, weekId, lectureId, newHtml);\n      \n      toast({ \n        title: ' Changes saved', \n        description: 'Your modified version has been saved to your account.' \n      });\n    } catch(error) {\n      console.error(\"Failed to save changes:\", error);\n      toast({ \n        variant: 'destructive', \n        title: 'Error', \n        description: 'Could not save your changes. Please try again.' \n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleResetToOriginal = async () => {\n    if (!user) return;\n    \n    try {\n      // Delete modified version from Firebase Storage\n      await deleteModifiedHtml(user.uid, weekId, lectureId);\n      \n      // Reload to show original\n      await reload();\n      \n      toast({ \n        title: 'Reset Complete', \n        description: 'The note has been reset to its original version.' \n      });\n    } catch(error) {\n      console.error(\"Failed to reset note:\", error);\n      toast({ \n        variant: 'destructive', \n        title: 'Error', \n        description: 'Could not reset the note.' \n      });\n    }\n  }\n  \n  const isLoading = isUserLoading || loading;\n\n  if (isLoading) {\n    return (\n      <AuthGuard>\n        <div className=\"flex h-screen w-full bg-background\">\n          <div className=\"hidden md:block w-64 border-r p-4\">\n            <Skeleton className=\"h-8 w-32 mb-8\" />\n            <div className=\"space-y-4\">\n              <Skeleton className=\"h-10 w-full\" />\n              <Skeleton className=\"h-10 w-full\" />\n              <Skeleton className=\"h-10 w-full\" />\n              <Skeleton className=\"h-10 w-full\" />\n            </div>\n          </div>\n          <div className=\"flex-1 p-8\">\n            <Skeleton className=\"h-12 w-1/3 mb-8\" />\n            <Skeleton className=\"h-10 w-full mb-4\" />\n            <Skeleton className=\"h-[60vh] w-full\" />\n          </div>\n        </div>\n      </AuthGuard>\n    );\n  }\n\n  const handlePrint = () => {\n    // Create a new window with the note content for printing\n    const printWindow = window.open('', '_blank');\n    if (printWindow && currentHtmlContent) {\n      printWindow.document.write(currentHtmlContent);\n      printWindow.document.close();\n      printWindow.focus();\n      setTimeout(() => {\n        printWindow.print();\n        printWindow.close();\n      }, 250);\n    }\n  };\n\n  const currentHtmlContent = htmlContent;\n\n  return (\n    <AuthGuard>\n      <div className=\"min-h-screen w-full relative bg-[#f6d7d7]\">\n        <div\n          className=\"pointer-events-none absolute inset-0 z-0\"\n          style={{\n            backgroundImage: `radial-gradient(circle at 10% 10%, rgba(124, 58, 237, 0.15), transparent 35%), radial-gradient(circle at 85% 25%, rgba(236, 72, 153, 0.18), transparent 45%), radial-gradient(circle at 80% 85%, rgba(16, 185, 129, 0.12), transparent 45%)`,\n            filter: 'blur(80px)',\n            backgroundRepeat: 'no-repeat',\n          }}\n        />\n\n        <div className=\"relative z-10\">\n          <header className=\"sticky top-0 z-30 border-b bg-black text-white\">\n            <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between\">\n              <div className=\"flex items-center gap-6\">\n                <Link href=\"/dashboard\" className=\"font-extrabold tracking-wide text-lg\">\n                  THE OPEN NOTES\n                </Link>\n                <nav className=\"hidden md:flex items-center gap-6 text-sm text-white/80\">\n                  <Link href=\"/dashboard\" className=\"hover:text-white\">Home</Link>\n                  <Link href={coursePath} className=\"hover:text-white\">{courseName}</Link>\n                  <span className=\"text-white/60\">Week {note?.week} - Lesson {note?.lesson}</span>\n                </nav>\n              </div>\n              <button\n                onClick={() => signOut(auth)}\n                className=\"rounded-full border border-red-400/60 bg-transparent px-4 py-1.5 text-sm text-red-100 hover:bg-red-500/10\"\n              >\n                Logout\n              </button>\n            </div>\n          </header>\n\n          <main className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 md:py-12\">\n            <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center gap-2\">\n                  <Button asChild variant=\"outline\" size=\"sm\" className=\"rounded-full bg-black text-white border-0 px-4 py-1.5 hover:bg-black/90\">\n                      <Link href={coursePath}>\n                          <ArrowLeft className=\"mr-2 h-4 w-4\" />\n                          Back to Course\n                      </Link>\n                  </Button>\n                  {isModified ? (\n                    <Badge variant=\"secondary\" className=\"text-xs rounded-full bg-emerald-500/15 text-emerald-900 border-0 px-2 py-1\">\n                       Your modified version\n                    </Badge>\n                  ) : (\n                    <Badge variant=\"outline\" className=\"text-xs rounded-full bg-amber-500/20 text-amber-900 border border-amber-300 px-2 py-1\">\n                       Original version\n                    </Badge>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2\">\n                    {isModified && (\n                        <AlertDialog>\n                            <AlertDialogTrigger asChild>\n                                <Button variant=\"destructive\" size=\"sm\" className=\"rounded-full px-3\">\n                                    <RotateCcw className=\"mr-2 h-4 w-4\" />\n                                    Reset to Original\n                                </Button>\n                            </AlertDialogTrigger>\n                            <AlertDialogContent>\n                                <AlertDialogHeader>\n                                    <AlertDialogTitle>Are you sure?</AlertDialogTitle>\n                                    <AlertDialogDescription>\n                                        This will discard all your custom changes to this note. This action cannot be undone.\n                                    </AlertDialogDescription>\n                                </AlertDialogHeader>\n                                <AlertDialogFooter>\n                                    <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                    <AlertDialogAction onClick={handleResetToOriginal}>Confirm Reset</AlertDialogAction>\n                                </AlertDialogFooter>\n                            </AlertDialogContent>\n                        </AlertDialog>\n                    )}\n                    <Button variant=\"outline\" size=\"sm\" onClick={handleAssistantClick} className=\"rounded-full bg-slate-800 text-white border-0 px-3 hover:bg-slate-700\">\n                        <Star className=\"mr-2 h-4 w-4\" />\n                        AI Assistant\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" disabled className=\"rounded-full bg-slate-700 text-white border-0 px-3 disabled:opacity-50\">\n                        <ChevronLeft className=\"mr-2 h-4 w-4\" />\n                        Previous\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" disabled className=\"rounded-full bg-slate-700 text-white border-0 px-3 disabled:opacity-50\">\n                        Next\n                        <ChevronRight className=\"ml-2 h-4 w-4\" />\n                    </Button>\n                    <Button variant=\"outline\" size=\"icon\" onClick={handlePrint} className=\"bg-black text-white border-0\">\n                        <Printer className=\"h-4 w-4\" />\n                    </Button>\n                    <Button variant=\"outline\" size=\"icon\" onClick={handleDownload} className=\"bg-black text-white border-0\">\n                        <Download className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"icon\"\n                      onClick={handleToggleFullscreen}\n                      aria-label={isFullscreen ? 'Exit Full Screen' : 'Full Screen'}\n                      className=\"bg-black text-white border-0\"\n                    >\n                      {isFullscreen ? (\n                        <Minimize2 className=\"h-4 w-4\" />\n                      ) : (\n                        <Maximize2 className=\"h-4 w-4\" />\n                      )}\n                    </Button>\n                </div>\n            </div>\n            <div ref={previewContainerRef} className=\"w-full h-[calc(100vh-12rem)] bg-[#f3f5f7] rounded-xl border-2 border-black/10 shadow-lg overflow-hidden\">\n                 <iframe\n                    id=\"note-iframe\"\n                    srcDoc={buildExportHtml(currentHtmlContent || '')}\n                    className=\"w-full h-full border-0\"\n                    sandbox=\"allow-scripts allow-same-origin\"\n                    title=\"Note Preview\"\n                />\n            </div>\n          </main>\n        </div>\n        {currentHtmlContent && (\n          <AssistantSidebarNew\n            isOpen={isAssistantOpen}\n            onClose={() => setIsAssistantOpen(false)}\n            note={note}\n            currentHtmlContent={currentHtmlContent}\n            onHtmlContentUpdate={handleHtmlUpdate}\n          />\n        )}\n      </div>\n    </AuthGuard>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3596, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/data/notes/faiData.ts"],"sourcesContent":["import { NoteData } from '@/types/notes';\n\n// Foundations of AI (FAI)  mapped from /public/notes/fai\nexport const faiNotesData: NoteData[] = [\n  { id: 'FAIW1', title: 'Week 1', description: 'See lecture notes.', week: 1, lesson: 0, tags: ['FAI'], dateAdded: '2025-01-01', readTime: '16 min', htmlFile: '/notes/fai/FAIW1.html' },\n  { id: 'FAIW2', title: 'Week 2', description: 'See lecture notes.', week: 2, lesson: 0, tags: ['FAI'], dateAdded: '2025-01-02', readTime: '16 min', htmlFile: '/notes/fai/FAIW2.html' },\n  { id: 'FAIW3', title: 'Week 3', description: 'See lecture notes.', week: 3, lesson: 0, tags: ['FAI'], dateAdded: '2025-01-03', readTime: '16 min', htmlFile: '/notes/fai/FAIW3.html' },\n  { id: 'FAIW4L1&W4L2', title: 'Week 4 - L1 & L2', description: 'Combined lectures.', week: 4, lesson: 0, tags: ['FAI'], dateAdded: '2025-01-04', readTime: '18 min', htmlFile: '/notes/fai/FAIW4L1&W4L2.html' },\n  { id: 'FAIW4L3', title: 'Week 4 - L3', description: 'See lecture notes.', week: 4, lesson: 3, tags: ['FAI'], dateAdded: '2025-01-04', readTime: '12 min', htmlFile: '/notes/fai/FAIW4L3.html' },\n  { id: 'FAIW5L1', title: 'Week 5 - L1', description: 'See lecture notes.', week: 5, lesson: 1, tags: ['FAI'], dateAdded: '2025-01-05', readTime: '12 min', htmlFile: '/notes/fai/FAIW5L1.html' },\n  { id: 'FAIW5L2', title: 'Week 5 - L2', description: 'See lecture notes.', week: 5, lesson: 2, tags: ['FAI'], dateAdded: '2025-01-05', readTime: '12 min', htmlFile: '/notes/fai/FAIW5L2.html' },\n  { id: 'FAIW6', title: 'Week 6', description: 'See lecture notes.', week: 6, lesson: 0, tags: ['FAI'], dateAdded: '2025-01-06', readTime: '16 min', htmlFile: '/notes/fai/FAIW6.html' },\n  { id: 'FAIW7', title: 'Week 7', description: 'See lecture notes.', week: 7, lesson: 0, tags: ['FAI'], dateAdded: '2025-01-07', readTime: '16 min', htmlFile: '/notes/fai/FAIW7.html' },\n  { id: 'FAIW8', title: 'Week 8', description: 'See lecture notes.', week: 8, lesson: 0, tags: ['FAI'], dateAdded: '2025-01-08', readTime: '16 min', htmlFile: '/notes/fai/FAIW8.html' },\n];\n"],"names":[],"mappings":";;;;AAGO,MAAM,eAA2B;IACtC;QAAE,IAAI;QAAS,OAAO;QAAU,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAAwB;IACrL;QAAE,IAAI;QAAS,OAAO;QAAU,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAAwB;IACrL;QAAE,IAAI;QAAS,OAAO;QAAU,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAAwB;IACrL;QAAE,IAAI;QAAgB,OAAO;QAAoB,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAA+B;IAC7M;QAAE,IAAI;QAAW,OAAO;QAAe,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAA0B;IAC9L;QAAE,IAAI;QAAW,OAAO;QAAe,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAA0B;IAC9L;QAAE,IAAI;QAAW,OAAO;QAAe,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAA0B;IAC9L;QAAE,IAAI;QAAS,OAAO;QAAU,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAAwB;IACrL;QAAE,IAAI;QAAS,OAAO;QAAU,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAAwB;IACrL;QAAE,IAAI;QAAS,OAAO;QAAU,aAAa;QAAsB,MAAM;QAAG,QAAQ;QAAG,MAAM;YAAC;SAAM;QAAE,WAAW;QAAc,UAAU;QAAU,UAAU;IAAwB;CACtL","debugId":null}},
    {"offset": {"line": 3736, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/khana/OneDrive/Desktop/personal%20Project/VoyLearning-main/src/app/dashboard/fai/%5BnoteId%5D/page.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport NotePreviewLayout from '@/components/dashboard/note-preview-layout';\nimport { faiNotesData } from '@/data/notes/faiData';\n\nexport default function FaiNotePage({ params }: { params: Promise<{ noteId: string }> }) {\n  const { noteId } = React.use(params);\n  const decodedId = decodeURIComponent(noteId);\n  const note = faiNotesData.find(n => n.id === decodedId);\n\n  return (\n    <NotePreviewLayout\n      courseName=\"FAI\"\n      courseTitle=\"Foundations of AI\"\n      note={note}\n      coursePath=\"/dashboard/fai\"\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,YAAY,EAAE,MAAM,EAA2C;IACrF,MAAM,EAAE,MAAM,EAAE,GAAG,4MAAS,CAAC;IAC7B,MAAM,YAAY,mBAAmB;IACrC,MAAM,OAAO,+IAAY,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAE7C,qBACE,8OAAC,uKAAiB;QAChB,YAAW;QACX,aAAY;QACZ,MAAM;QACN,YAAW;;;;;;AAGjB","debugId":null}}]
}